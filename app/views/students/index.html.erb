<% flash.each do |name, msg| -%>
      <%= content_tag :div, msg, class: name %>
<% end -%>

<h1>List of Students</h1>

<p>
  <%= Student.find(session[:student_id]) %>
</p>
  <p>
  <%= link_to 'Log out', session_path(:student_id), method: :delete, data: { confirm: 'Are you sure?' } %>
  </p>


<% require 'digest/md5' %>
<table rules="rows">
  <tr>
    <th>Name</th>
    <th>Nickname</th>
    <th>Email</th>
    <th>Image</th>
  </tr>
 
  <% @students.each do |student| %>
    <% email_address= (student.email).downcase %>
    
    <tr>
      <td><%= student.name %></td>
      <td><%= student.nickname %></td>
      <td><%= student.email %></td>
      <td>
        <% if student.image != ""%>
          <img src= <%= student.image %> alt="image" height=100 width=100>
        <% elsif student.email != ""%>
          <% hash = Digest::MD5.hexdigest(email_address) %>
          <img src=<%= "http://www.gravatar.com/avatar/#{hash}" %>>
        <% else %>
          <img src=<%="http://premium.wpmudev.org/blog/wp-content/uploads/2012/04/mystery-man-small.jpg" %> height=100 width=100>
        <% end %>
      </td>
      
      <td><%= link_to 'Show', student %></td>
      <td><%= link_to 'Edit Profile', edit_student_path(student) %></td>
      
    </tr>
  <% end %>
</table>